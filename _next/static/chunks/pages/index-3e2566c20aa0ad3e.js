(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(572)}])},572:function(t,e,n){"use strict";function r(t,e,n,r,s,o,a){try{var c=t[o](a),i=c.value}catch(u){return void n(u)}c.done?e(i):Promise.resolve(i).then(r,s)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(s,o){var a=t.apply(e,n);function c(t){r(a,s,o,c,i,"next",t)}function i(t){r(a,s,o,c,i,"throw",t)}c(void 0)}))}}n.r(e),n.d(e,{default:function(){return N}});var o=n(655),a=n(5893),c=n(7294);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){var e=t.replace(/<p>/g,"\n\n");return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}var m=n(3948),d=n.n(m),f=function(t){var e=t.commentId,n=t.depth,r=t.firstInSeries,i=t.commentData,m=t.setCommentData,h=(0,c.useState)(i[e]),p=h[0],_=h[1],x=(0,c.useState)(!1),j=x[0],v=x[1],y="".concat(d().comment," ").concat(n>0?d().subcomment:""),b=(0,c.useCallback)(s((function(){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json?print=pretty")).then((function(t){return t.json()}))];case 1:return t=r.sent(),(n=i)[e]=t,m(n),_(t),[2]}}))})),[]);(0,c.useEffect)((function(){p||b()}),[]);return(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsxs)("li",{id:"comment-".concat(e),className:y,style:{"--comment-depth":n+"px"},children:[(0,a.jsxs)("div",{className:d().commentHeader,onClick:function(){v(!j)},children:[(0,a.jsx)("span",{className:d().author,children:p.by}),(0,a.jsx)("span",{className:d().timestamp,children:function(t){var e=new Date(1e3*t),n=e.toLocaleString([],{month:"numeric",day:"numeric",year:"2-digit"}),r=e.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return"".concat(r," - ").concat(n)}(p.time)}),(0,a.jsx)("span",{className:d().collapsedText,children:j?"(collapsed)":""})]}),!j&&(0,a.jsx)("div",{className:d().text,children:p.text&&l(p.text)}),function(t){return u(Array(t)).map((function(t,n){return(0,a.jsx)("div",{className:"".concat(d().border," ").concat(r&&0==n?d().short:""),style:{"--depth-offset":-20*(n+1)+"px"}},"border-".concat(e,"-").concat(n))}))}(n)]},e),p&&!j&&p.kids&&p.kids.map((function(t,e){return(0,a.jsx)(f,{commentId:t,depth:n+1,firstInSeries:!e,commentData:i,setCommentData:m},t)}))]})},h=f,p=n(8369),_=n.n(p),x=function(t){var e=t.story,n=(0,c.useState)({}),r=n[0],s=n[1],o=function(t){var e=new Date(1e3*t),n=e.toLocaleString([],{month:"long",day:"numeric",year:"numeric"}),r=e.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return(0,a.jsx)("span",{className:_().time,children:"".concat(r," - ").concat(n)})};return(0,a.jsx)(a.Fragment,{children:function(){var t=e.title,n=e.time,c=e.by,i=e.url;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:_().storyHeader,children:[(0,a.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:(0,a.jsx)("h1",{children:t})}),(0,a.jsx)("div",{className:_().author,children:c}),o(n)]}),(0,a.jsx)("ul",{className:_().commentsWrapper,children:e.kids.map((function(t){return(0,a.jsx)(h,{commentId:t,depth:0,firstInSeries:!0,commentData:r,setCommentData:s},t)}))})]})}()})},j=n(7371),v=n.n(j),y=function(t){var e=t.storyId,n=t.storyData,r=t.expandedStory,i=t.setExpandedStory,u=(0,c.useState)(n[e]),l=u[0],m=u[1],d=(0,c.useCallback)(s((function(){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json?print=pretty")).then((function(t){return t.json()}))];case 1:return t=n.sent(),m(t),[2]}}))})),[]);return(0,c.useEffect)((function(){l||d()}),[]),(0,a.jsx)(a.Fragment,{children:l?(0,a.jsxs)("li",{id:"story-".concat(l.id),className:"".concat(v().link," ").concat(r&&e===r.id?v().active:""),onClick:function(){return i(l)},children:[(0,a.jsx)("div",{className:v().title,children:l.title}),(0,a.jsxs)("div",{className:v().commentCount,children:["\ud83d\udce3 ",l.kids&&l.kids.length]}),(0,a.jsxs)("div",{className:v().score,children:["\ud83d\udd3a ",l.score]})]},l.id):(0,a.jsx)("li",{className:v().link})})},b=n(1673),g=n.n(b),k=n(1998),S=n.n(k),C=function(t){var e=t.page,n=t.setPage,r=t.setExpandedStory;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:S().pagination,children:[(0,a.jsx)("button",{disabled:e-1===0,onClick:function(){r(null),n(e-1)},children:"prev"}),(0,a.jsx)("span",{children:e}),(0,a.jsx)("button",{onClick:function(){r(null),n(e+1)},children:"next"})]})})},N=function(){var t=(0,c.useState)([]),e=t[0],n=t[1],r=(0,c.useState)([]),i=r[0],u=r[1],l=(0,c.useState)({}),m=l[0],d=l[1],f=(0,c.useState)(1),h=f[0],p=f[1],_=(0,c.useState)(20),j=_[0],v=(_[1],(0,c.useState)()),b=v[0],k=v[1];(0,c.useEffect)((function(){S().catch(console.error)}),[]),(0,c.useEffect)((function(){var t=e.slice((h-1)*j,h*j),n=e.slice((h-1)*j,(h+1)*j);u(t);var r=m;n.forEach(function(){var t=s((function(t){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return r[t]?[3,2]:[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(t,".json?print=pretty")).then((function(t){return t.json()}))];case 1:e=n.sent(),r[t]=e,n.label=2;case 2:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()),d(r)}),[e,h]),(0,c.useEffect)((function(){document.querySelector("#content-wrapper").scrollTop=0}),[b]);var S=(0,c.useCallback)(s((function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty").then((function(t){return t.json()}))];case 1:return t=e.sent(),n(t),[2]}}))})),[]),N=(0,c.useCallback)(s((function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/beststories.json?print=pretty").then((function(t){return t.json()}))];case 1:return t=e.sent(),n(t),[2]}}))})),[]),w=(0,c.useCallback)(s((function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty").then((function(t){return t.json()}))];case 1:return t=e.sent(),n(t),[2]}}))})),[]),E=function(){1!==h&&p(1),k(null),S()},H=function(){1!==h&&p(1),k(null),N()},I=function(){1!==h&&p(1),k(null),w()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:g().header,children:[(0,a.jsx)("h2",{className:g().title,children:"Hacker News Refresh"}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:g().storiesButton,onClick:E,children:"\ud83d\udd25"}),(0,a.jsx)("button",{className:g().storiesButton,onClick:H,children:"\ud83d\udc51"}),(0,a.jsx)("button",{className:g().storiesButton,onClick:I,children:"\ud83d\udc76"})]})]}),(0,a.jsxs)("main",{className:g().main,children:[(0,a.jsxs)("div",{className:g().sidenav,children:[(0,a.jsx)("ul",{children:i.map((function(t){return(0,a.jsx)(y,{storyId:t,storyData:m,expandedStory:b,setExpandedStory:k},t)}))}),(0,a.jsx)(C,{page:h,setPage:p,setExpandedStory:k})]}),(0,a.jsx)("div",{id:"content-wrapper",className:g().contentWrapper,children:b&&(0,a.jsx)(x,{story:b})})]})]})}},3948:function(t){t.exports={comment:"Comment_comment__Rz7a9",text:"Comment_text__MTUmc",commentHeader:"Comment_commentHeader__aNKEB",author:"Comment_author__jBbZb",border:"Comment_border__GqcJO",short:"Comment_short__YPnZM"}},8369:function(t){t.exports={iframe:"Content_iframe__oCZz8",storyHeader:"Content_storyHeader__59uXF",commentsWrapper:"Content_commentsWrapper__dCE9S"}},1673:function(t){t.exports={header:"Home_header__CyQ_T",title:"Home_title__q0Qg4",main:"Home_main__OVLM4",sidenav:"Home_sidenav__WXhjI",contentWrapper:"Home_contentWrapper__WcKg5",storiesButton:"Home_storiesButton__7YkOf"}},1998:function(t){t.exports={pagination:"Pagination_pagination__CSBV_"}},7371:function(t){t.exports={link:"StoryLink_link__1KGhz",active:"StoryLink_active__3bHPV",title:"StoryLink_title__uojOu"}}},function(t){t.O(0,[774,888,179],(function(){return e=8312,t(t.s=e);var e}));var e=t.O();_N_E=e}]);