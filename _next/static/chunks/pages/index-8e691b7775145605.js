(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(572)}])},572:function(t,e,n){"use strict";function r(t,e,n,r,o,s,a){try{var c=t[s](a),i=c.value}catch(u){n(u);return}c.done?e(i):Promise.resolve(i).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(o,s){var a=t.apply(e,n);function c(t){r(a,o,s,c,i,"next",t)}function i(t){r(a,o,s,c,i,"throw",t)}c(void 0)})}}n.r(e),n.d(e,{default:function(){return k}});var s=n(655),a=n(5893),c=n(7294);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var u=n(3948),l=n.n(u),m=function(t){var e=t.commentId,n=t.depth,r=t.firstInSeries,u=t.commentData,d=t.setCommentData,h=(0,c.useState)(u[e]),f=h[0],_=h[1],p=(0,c.useState)(!1),x=p[0],j=p[1],y="".concat(l().comment," ").concat(n>0?l().subcomment:""),v=(0,c.useCallback)(o(function(){var t,n;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json?print=pretty")).then(function(t){return t.json()})];case 1:return t=r.sent(),(n=u)[e]=t,d(n),_(t),[2]}})}),[]);(0,c.useEffect)(function(){f||v()},[]);var b,g,k,C,S,N,w,D,E=function(t){j(!t)};return(0,a.jsxs)(a.Fragment,{children:[f&&(0,a.jsxs)("li",{id:"comment-".concat(e),className:y,style:{"--comment-depth":n+"px"},children:[(0,a.jsxs)("div",{className:l().commentHeader,onClick:function(){return E(x)},children:[(0,a.jsx)("span",{className:l().author,children:f.by}),(0,a.jsx)("span",{className:l().timestamp,children:(b=f.time,k=(g=new Date(1e3*b)).toLocaleString([],{month:"numeric",day:"numeric",year:"2-digit"}),C=g.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),"".concat(C," - ").concat(k))}),(0,a.jsx)("span",{className:l().collapsedText,children:x?"(collapsed)":""})]}),!x&&(0,a.jsx)("div",{className:l().text,children:f.text&&(N=(S=f.text).replace(/<p>/g,"\n\n"),new DOMParser().parseFromString(N,"text/html").documentElement.textContent)}),((function(t){if(Array.isArray(t))return i(t)})(D=Array(n))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(D)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}}(D)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(t,n){return(0,a.jsx)("div",{className:"".concat(l().border," ").concat(r&&0==n?l().short:""),style:{"--depth-offset":-((n+1)*20)+"px"}},"border-".concat(e,"-").concat(n))})]},e),f&&!x&&f.kids&&f.kids.map(function(t,e){return(0,a.jsx)(m,{commentId:t,depth:n+1,firstInSeries:!e,commentData:u,setCommentData:d},t)})]})},d=n(8369),h=n.n(d),f=function(t){var e,n,r,o,s,i,u,l,d=t.story,f=(0,c.useState)({}),_=f[0],p=f[1];return(0,a.jsx)(a.Fragment,{children:(e=d.title,n=d.time,r=d.by,o=d.url,(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:h().storyHeader,children:[(0,a.jsxs)("div",{className:h().topRow,children:[(0,a.jsx)("div",{className:h().author,children:r}),(s=n,i=new Date(1e3*s),u=i.toLocaleString([],{month:"long",day:"numeric",year:"numeric"}),l=i.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),(0,a.jsx)("span",{className:h().time,children:"".concat(l," - ").concat(u)}))]}),(0,a.jsx)("a",{href:o,target:"_blank",rel:"noreferrer",children:(0,a.jsx)("h1",{children:e})})]}),(0,a.jsx)("ul",{className:h().commentsWrapper,children:d.kids.map(function(t){return(0,a.jsx)(m,{commentId:t,depth:0,firstInSeries:!0,commentData:_,setCommentData:p},t)})})]}))})},_=n(7371),p=n.n(_),x=function(t){var e=t.storyId,n=t.storyData,r=t.expandedStory,i=t.setExpandedStory,u=(0,c.useState)(n[e]),l=u[0],m=u[1],d=(0,c.useCallback)(o(function(){var t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json?print=pretty")).then(function(t){return t.json()})];case 1:return m(t.sent()),[2]}})}),[]);return(0,c.useEffect)(function(){l||d()},[]),(0,a.jsx)(a.Fragment,{children:l?(0,a.jsxs)("li",{id:"story-".concat(l.id),className:"".concat(p().link," ").concat(r&&e===r.id?p().active:""),onClick:function(){return i(l)},children:[(0,a.jsx)("div",{className:p().title,children:l.title}),(0,a.jsx)("div",{className:p().author,children:l.by}),(0,a.jsxs)("div",{className:p().indicatorWrapper,children:[(0,a.jsxs)("div",{className:p().commentCount,children:["\uD83D\uDCE3 ",l.kids&&l.kids.length]}),(0,a.jsxs)("div",{className:p().score,children:["\uD83D\uDD3C ",l.score]})]})]},l.id):(0,a.jsx)("li",{className:p().link})})},j=n(1673),y=n.n(j),v=n(1998),b=n.n(v),g=function(t){var e=t.page,n=t.setPage,r=t.setExpandedStory,o=function(){r(null),n(e+1)},s=function(){r(null),n(e-1)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:b().pagination,children:[(0,a.jsx)("button",{disabled:e-1==0,onClick:s,children:"prev"}),(0,a.jsx)("span",{children:e}),(0,a.jsx)("button",{onClick:o,children:"next"})]})})},k=function(){var t=(0,c.useState)([]),e=t[0],n=t[1],r=(0,c.useState)([]),i=r[0],u=r[1],l=(0,c.useState)({}),m=l[0],d=l[1],h=(0,c.useState)(1),_=h[0],p=h[1],j=(0,c.useState)(20),v=j[0];j[1];var b=(0,c.useState)(),k=b[0],C=b[1];(0,c.useEffect)(function(){S().catch(console.error)},[]),(0,c.useEffect)(function(){var t=e.slice((_-1)*v,_*v),n=e.slice((_-1)*v,(_+1)*v);u(t);var r,a=m;n.forEach((r=o(function(t){var e;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(a[t])return[3,2];return[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(t,".json?print=pretty")).then(function(t){return t.json()})];case 1:e=n.sent(),a[t]=e,n.label=2;case 2:return[2]}})}),function(t){return r.apply(this,arguments)})),d(a)},[e,_]),(0,c.useEffect)(function(){document.querySelector("#content-wrapper").scrollTop=0},[k]);var S=(0,c.useCallback)(o(function(){var t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty").then(function(t){return t.json()})];case 1:return n(t.sent()),[2]}})}),[]),N=(0,c.useCallback)(o(function(){var t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/beststories.json?print=pretty").then(function(t){return t.json()})];case 1:return n(t.sent()),[2]}})}),[]),w=(0,c.useCallback)(o(function(){var t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty").then(function(t){return t.json()})];case 1:return n(t.sent()),[2]}})}),[]),D=function(){1!==_&&p(1),C(null),S()},E=function(){1!==_&&p(1),C(null),N()},H=function(){1!==_&&p(1),C(null),w()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:y().header,children:[(0,a.jsx)("h2",{className:y().title,children:"Hacker News Refresh"}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:y().storiesButton,onClick:D,children:"\uD83D\uDD25"}),(0,a.jsx)("button",{className:y().storiesButton,onClick:E,children:"\uD83D\uDC51"}),(0,a.jsx)("button",{className:y().storiesButton,onClick:H,children:"\uD83D\uDC76"})]})]}),(0,a.jsxs)("main",{className:y().main,children:[(0,a.jsxs)("div",{className:y().sidenav,children:[(0,a.jsx)("ul",{children:i.map(function(t){return(0,a.jsx)(x,{storyId:t,storyData:m,expandedStory:k,setExpandedStory:C},t)})}),(0,a.jsx)(g,{page:_,setPage:p,setExpandedStory:C})]}),(0,a.jsx)("div",{id:"content-wrapper",className:y().contentWrapper,children:k&&(0,a.jsx)(f,{story:k})})]})]})}},3948:function(t){t.exports={comment:"Comment_comment__Rz7a9",text:"Comment_text__MTUmc",commentHeader:"Comment_commentHeader__aNKEB",author:"Comment_author__jBbZb",border:"Comment_border__GqcJO",short:"Comment_short__YPnZM"}},8369:function(t){t.exports={iframe:"Content_iframe__oCZz8",storyHeader:"Content_storyHeader__59uXF",topRow:"Content_topRow__3qvQy",author:"Content_author__xjel_",commentsWrapper:"Content_commentsWrapper__dCE9S"}},1673:function(t){t.exports={header:"Home_header__CyQ_T",title:"Home_title__q0Qg4",main:"Home_main__OVLM4",sidenav:"Home_sidenav__WXhjI",contentWrapper:"Home_contentWrapper__WcKg5",storiesButton:"Home_storiesButton__7YkOf"}},1998:function(t){t.exports={pagination:"Pagination_pagination__CSBV_"}},7371:function(t){t.exports={link:"StoryLink_link__1KGhz",active:"StoryLink_active__3bHPV",title:"StoryLink_title__uojOu",author:"StoryLink_author__WYGZJ",indicatorWrapper:"StoryLink_indicatorWrapper__rgbYE",score:"StoryLink_score__7Menj",commentCount:"StoryLink_commentCount__pi1Yl"}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);